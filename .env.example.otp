# ============================================
# KONFIGURASI EMAIL UNTUK OTP SYSTEM
# ============================================

# Pilih salah satu dari konfigurasi di bawah

# ============================================
# OPTION 1: GMAIL SMTP (Recommended)
# ============================================
MAIL_MAILER=smtp
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-app-password
MAIL_ENCRYPTION=tls
MAIL_FROM_ADDRESS=your-email@gmail.com
MAIL_FROM_NAME="PPDB SMK Bakti Nusantara 666"

# Cara mendapatkan App Password Gmail:
# 1. Buka https://myaccount.google.com/
# 2. Pilih "Security" di menu sebelah kiri
# 3. Aktifkan "2-Step Verification" jika belum aktif
# 4. Cari "App passwords" dan klik
# 5. Pilih "Mail" dan "Windows Computer" (atau device Anda)
# 6. Copy password yang diberikan
# 7. Paste ke MAIL_PASSWORD di atas

# ============================================
# OPTION 2: MAILTRAP (untuk Testing)
# ============================================
# MAIL_MAILER=smtp
# MAIL_HOST=smtp.mailtrap.io
# MAIL_PORT=2525
# MAIL_USERNAME=your-mailtrap-username
# MAIL_PASSWORD=your-mailtrap-password
# MAIL_ENCRYPTION=tls
# MAIL_FROM_ADDRESS=your-email@example.com
# MAIL_FROM_NAME="PPDB SMK Bakti Nusantara 666"

# Cara mendapatkan Mailtrap credentials:
# 1. Daftar di https://mailtrap.io/
# 2. Buat project baru
# 3. Pilih "SMTP Settings"
# 4. Copy credentials dari sana

# ============================================
# OPTION 3: SENDGRID
# ============================================
# MAIL_MAILER=sendgrid
# SENDGRID_API_KEY=your-sendgrid-api-key
# MAIL_FROM_ADDRESS=your-email@example.com
# MAIL_FROM_NAME="PPDB SMK Bakti Nusantara 666"

# ============================================
# OPTION 4: MAILGUN
# ============================================
# MAIL_MAILER=mailgun
# MAILGUN_DOMAIN=your-domain.mailgun.org
# MAILGUN_SECRET=your-mailgun-secret
# MAIL_FROM_ADDRESS=your-email@example.com
# MAIL_FROM_NAME="PPDB SMK Bakti Nusantara 666"

# ============================================
# OPTION 5: LOG (untuk Development/Testing)
# ============================================
# MAIL_MAILER=log
# MAIL_LOG_CHANNEL=stack
# MAIL_FROM_ADDRESS=hello@example.com
# MAIL_FROM_NAME="PPDB SMK Bakti Nusantara 666"

# Email akan disimpan di storage/logs/laravel.log
# Berguna untuk testing tanpa benar-benar mengirim email

# ============================================
# TESTING EMAIL CONFIGURATION
# ============================================

# Untuk test email sending, jalankan:
# php artisan tinker

# Kemudian di tinker shell:
# use App\Models\Otp;
# use App\Mail\SendOtp;
# use Illuminate\Support\Facades\Mail;
# 
# $otp = Otp::generateOtp('test@example.com');
# Mail::to('test@example.com')->send(new SendOtp($otp->otp, 'test@example.com'));

# ============================================
# NOTES
# ============================================

# 1. Jangan commit .env ke repository
# 2. Gunakan .env.example untuk template
# 3. Setiap developer harus punya .env sendiri
# 4. Untuk production, gunakan environment variables yang aman
# 5. Jangan hardcode credentials di code

# ============================================
# TROUBLESHOOTING
# ============================================

# Email tidak terkirim?
# 1. Cek MAIL_MAILER (harus smtp, sendgrid, mailgun, atau log)
# 2. Cek MAIL_HOST, PORT, USERNAME, PASSWORD
# 3. Cek firewall/antivirus
# 4. Lihat log: storage/logs/laravel.log
# 5. Coba dengan Mailtrap untuk testing

# OTP tidak dikirim?
# 1. Cek konfigurasi email di atas
# 2. Cek apakah email address valid
# 3. Cek folder spam/junk
# 4. Lihat log untuk error message

# ============================================
# PRODUCTION RECOMMENDATIONS
# ============================================

# 1. Gunakan SendGrid atau Mailgun untuk production
# 2. Jangan gunakan Gmail untuk production (rate limit)
# 3. Setup SPF, DKIM, DMARC records
# 4. Monitor email delivery rate
# 5. Setup bounce handling
# 6. Implement rate limiting untuk OTP generation
# 7. Setup monitoring dan alerting

# ============================================
